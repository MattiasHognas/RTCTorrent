var RtcTorrent;(function(n){"use strict";var t=function(){function n(){this.finalTranscript="",this.recognizing=!1,this.twoLine=/\n\n/g,this.oneLine=/\n/g,this.firstChar=/\S/,"webkitSpeechRecognition"in window&&this.createApi()}return n.langs="sv-SE",n.prototype.createApi=function(){this.recognition=new window.webkitSpeechRecognition,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.onstart=function(){this.recognizing=!0},this.recognition.onerror=function(n){n.error=="no-speech"&&(this.ignoreOnend=!0),n.error=="audio-capture"&&(this.ignoreOnend=!0),n.error=="not-allowed"&&(this.ignoreOnend=!0)},this.recognition.onend=function(){(this.recognizing=!1,this.ignoreOnend)||!this.finalTranscript},this.recognition.onresult=function(n){var i="",t;if(typeof n.results=="undefined"){this.recognition.onend=null,this.recognition.stop();return}for(t=n.resultIndex;t<n.results.length;++t)n.results[t].isFinal?(i="",this.finalTranscript=n.results[t][0].transcript):(this.finalTranscript="",i=n.results[t][0].transcript);if(this.finalTranscript=this.capitalize(this.finalTranscript),this.finalTranscript==""){if(i=="")return;this.textSource(this.linebreak(i))}else this.textSource(this.linebreak(this.finalTranscript)),this.textDone()}},n.prototype.linebreak=function(n){return n.replace(this.twoLine,"<p><\/p>").replace(this.oneLine,"<br>")},n.prototype.capitalize=function(n){return n.replace(this.firstChar,function(n){return n.toUpperCase()})},n.prototype.stop=function(){this.recognizing&&(this.recognizing=!1,this.recognition.stop())},n.prototype.start=function(n){if(this.recognizing){this.recognition.stop();return}this.finalTranscript="",this.recognition!=null&&(this.createApi(),this.recognition.lang=n,this.recognition.start()),this.ignoreOnend=!1,this.textSource("")},n}();n.Speech=t})(RtcTorrent||(RtcTorrent={}))